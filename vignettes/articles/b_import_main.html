<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Import system - main functions</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Import system - main functions</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(tinyoperations)</span></code></pre></div>
<p> </p>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>One can load a package without attaching the package (i.e. using
<code>::</code> or using a package alias), or one can attach a package
(i.e. using <code>library()</code> or <code>require()</code>). Both
options have their pros and cons, obviously.</p>
<p>The advantages and disadvantages of loading without attaching a
package versus attaching a package - at least those relevant for this
article - can be compactly presented in the following table:</p>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
aspect
</th>
<th style="text-align:left;">
alias / ::
</th>
<th style="text-align:left;">
attaching
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
prevent masking functions from other packages
</td>
<td style="text-align:left;">
Yes (+)
</td>
<td style="text-align:left;">
No (-)
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
prevent masking core R functions
</td>
<td style="text-align:left;">
Yes (+)
</td>
<td style="text-align:left;">
No (-)
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
clarify which function came from which package
</td>
<td style="text-align:left;">
Yes (+)
</td>
<td style="text-align:left;">
No (-)
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
place/expose functions only in current environment instead of globally
</td>
<td style="text-align:left;">
Yes (+)
</td>
<td style="text-align:left;">
No (-)
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
prevent namespace pollution
</td>
<td style="text-align:left;">
Yes (+)
</td>
<td style="text-align:left;">
No (-)
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
minimize typing - especially for infix operators <br> (i.e. typing
<code>package::`%op%`(x, y)</code> instead of <code>x %op% y</code> is
cumbersome)
</td>
<td style="text-align:left;">
No (-)
</td>
<td style="text-align:left;">
Yes (+)
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
use multiple related packages, <br> without constantly switching between
package prefixes
</td>
<td style="text-align:left;">
No (-)
</td>
<td style="text-align:left;">
Yes (+)
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
NOTE: + = advantage, - = disavantage
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody>
</table>
<p>What <code>tinyoperations</code> attempts to do with its import
system, is to somewhat find the best of both worlds. Basically,
<code>tinyoperations</code> has functions that allow the following
import functionality lacking in base R:</p>
<ul>
<li>Allow an R package + its re-exports + its dependencies + its
enhances + its extensions to be loaded under <strong>one alias</strong>.
This essentially combines the attaching advantage of using multiple
related packages (row 7 in table above), whilst keeping most advantages
of aliasing a package.</li>
<li>Allow <strong>exposing infix operators</strong> to the
<strong>current environment</strong>. This gains the attaching advantage
of less typing (row 6 in table above), whilst simultaneously avoiding
the disadvantage of attaching functions from a package globally (row
4).</li>
</ul>
<p>The import package system presented here is just another option
provided, just like the <a href="https://github.com/rticulate/import">import</a> and <a href="https://github.com/klmr/box">box</a> packages provide their own
alternative import systems. Please feel free to completely ignore this
article if you’re really adamant on attaching packages using
<code>library()</code>/<code>require()</code> :-).</p>
<p>This article is rather lengthy, so I will start with a quick example
code using <code>tinyoperations</code>’ import system:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># loading &quot;tidytable&quot; + its re-exports + &quot;data.table&quot; under alias &quot;tdt.&quot;:</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">import_as</span>( </span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  tdt., <span class="st">&quot;tidytable&quot;</span>, <span class="at">dependencies =</span> <span class="st">&quot;data.table&quot;</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co">#&gt; Importing packages...</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">#&gt; Done</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co">#&gt; You can now access the functions using `tdt.$`</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co">#&gt; Methods will work like normally </span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">#&gt; For conflicts report, packages order, and other attributes, run `attr.import(tdt.)`</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="co"># exposing operators from `magrrittr` to current environment:</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="fu">import_inops</span>(<span class="st">&quot;magrittr&quot;</span>)</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="co">#&gt; Checking for conflicting infix operators in the current environment...</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="co">#&gt; Placing infix operators in current environment...</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="co">#&gt; Done</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="co"># directly assigning the &quot;starwars&quot; dataset to object &quot;d&quot;:</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">import_data</span>(<span class="st">&quot;starwars&quot;</span>, <span class="st">&quot;dplyr&quot;</span>) </span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="co"># see it in action:</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a>d <span class="sc">%&gt;%</span> tdt.<span class="sc">$</span><span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">&quot;Droid&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a>  tdt.<span class="sc">$</span><span class="fu">select</span>(name, tdt.<span class="sc">$</span><span class="fu">ends_with</span>(<span class="st">&quot;color&quot;</span>))</span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="co">#&gt; # A tidytable: 6 × 4</span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a><span class="co">#&gt;   name   hair_color skin_color  eye_color</span></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;    </span></span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a><span class="co">#&gt; 1 C-3PO  &lt;NA&gt;       gold        yellow   </span></span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a><span class="co">#&gt; 2 R2-D2  &lt;NA&gt;       white, blue red      </span></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a><span class="co">#&gt; 3 R5-D4  &lt;NA&gt;       white, red  red      </span></span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a><span class="co">#&gt; 4 IG-88  none       metal       red      </span></span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a><span class="co">#&gt; 5 R4-P17 none       silver, red red, blue</span></span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a><span class="co">#&gt; 6 BB8    none       none        black</span></span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>()) <span class="co"># clearing everything</span></span></code></pre></div>
<p>The above code is run <em>without attaching</em> any of the packages
or its dependencies. So none of the problems with attaching a package is
present.</p>
<p>Despite the length of this article, which is mostly due to me being
overly detailed, the import system is made to be <em>very simple for the
user</em>.</p>
<p>What follows are descriptions of the main functions that together
form this new, infix-operator friendly <strong>&amp;</strong>
multi-package assignment friendly, import management system.</p>
<p> </p>
</div>
<div id="import_as" class="section level1">
<h1>import_as</h1>
<p>One can load a package without attaching it, and assign it to an
alias, in base R, using, for example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>alias <span class="ot">&lt;-</span> <span class="fu">loadNamespace</span>(<span class="st">&quot;packagename&quot;</span>, <span class="at">lib.loc =</span> lib.loc)</span></code></pre></div>
<p>Doing the above, instead of attaching a package using
<code>library()</code> or <code>require()</code>, can (often) be quite
beneficial (see Introduction section in this article).</p>
<p>Loading a package alias does have some drawbacks. One is that you
cannot easily import multiple related packages under the same alias.
Although one may not always want to import <strong>multiple</strong>
related packages under a <strong>single alias</strong>, there are
several situations where importing multiple packages into a single alias
may be preferable:</p>
<ul>
<li>If multiple packages are meant to work together, constantly
switching between the different package name/alias prefixes may
eventually become annoying and even syntactically chaotic-looking.</li>
<li>A package may have one or several dependencies that are supposed to
be loaded together. For example: the <code>tidytable</code> package
essentially needs the <code>data.table</code> package to be loaded
also.</li>
<li>A package may have many extensions you may want to load together.
For example: <code>ggplot2</code> has many extensions (see <a href="https://exts.ggplot2.tidyverse.org/gallery/" class="uri">https://exts.ggplot2.tidyverse.org/gallery/</a>). If one
wishes to alias <code>ggplot2</code> including some of its many
extensions, it would be nice to load multiple R packages under the same
alias.</li>
<li>Suppose package <code>B</code> is supposed to overwrite a couple of
functions from package <code>A</code> (for example if package
<code>B</code> extends or improves the functionality from a function in
package <code>A</code>). In that case you may want to import package
<code>A</code>, and then overwrite it with package <code>B</code>.</li>
</ul>
<p>So there are several cases where it is perhaps desirable to load
multiple packages under the same alias.</p>
<p>And that is where <code>tinyoperations</code>’s
<code>import_as()</code> function comes in. It loads an R package + its
re-exports under an alias, and also loads any specified
<strong>dependencies</strong>, <strong>enhances</strong> and/or
<strong>extensions</strong> of the package under the very same alias. It
also informs the user which objects from a package will overwrite which
objects from other packages, so you will never be surprised.</p>
<p><code>import_as(alias, ...)</code> is thus essentially the more
user-friendly and multi-package equivalent of
<code>alias &lt;- loadNamespace(...)</code>.</p>
<p>The main arguments of the <code>import_as()</code> function are:</p>
<ul>
<li><code>alias</code>: the name (unquoted) of the alias object under
which to load the package(s). To keep aliases easily distinguishable
from other objects that can also be subset with the <code>$</code>
operator, I recommend ending (not starting!) all alias names with a dot
(.).</li>
<li><code>main_package</code>: the name (string) of the main package to
load.</li>
<li><code>re_exports</code>: Some R packages export functions that are
not defined in their own package, but in their direct dependencies -
“re-exports”. If <code>TRUE</code> (default), the re-exports of the
<code>main_package</code> are added to the alias, analogous to the
behaviour of base R’s <code>::</code> operator. If <code>FALSE</code>,
re-exports are not added.</li>
<li><code>dependencies</code>: an optional character vector giving the
dependencies of the <code>main_package</code> to load under the alias
also.</li>
<li><code>enhances</code>: an optional character vector giving the
packages enhanced by the <code>main_package</code> to load under the
alias also.</li>
<li><code>extensions</code>: an optional character vector giving the
extensions/reverse-dependencies of the <code>main_package</code> to load
under the same alias also.</li>
<li><code>lib.loc</code>: the library paths to look for the packages;
defaults to <code>.libPaths()</code>. This argument is present in all
<code>import_</code> - functions.</li>
</ul>
<p>Here is one example. Lets load <a href="https://github.com/Rdatatable/data.table">data.table</a> and its
extensions <a href="https://github.com/markfairbanks/tidytable">tidytable</a>, under
the same alias, which I will call “tdt.” (for “tidy data.table”):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">import_as</span>(tdt., <span class="st">&quot;data.table&quot;</span>, <span class="at">extensions =</span> <span class="st">&quot;tidytable&quot;</span>) <span class="co"># this creates the tdt. object</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">#&gt; Importing packages...</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="co">#&gt; Done</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co">#&gt; You can now access the functions using `tdt.$`</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">#&gt; Methods will work like normally </span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="co">#&gt; For conflicts report, packages order, and other attributes, run `attr.import(tdt.)`</span></span></code></pre></div>
<p>Now you can of course use those loaded packages as one would normally
do when using a package alias: <code>tdt.$some_function()</code>.</p>
<p> </p>
</div>
<div id="import_inops" class="section level1">
<h1>import_inops</h1>
<p>When aliasing an R package, infix operators are also loaded in the
alias. However, it may be cumbersome to use them from the alias. For
example this:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">import_as</span>(to., <span class="st">&quot;tinyoperations&quot;</span>)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>to.<span class="sc">$</span><span class="st">`</span><span class="at">%row~%</span><span class="st">`</span>(x, mat)</span></code></pre></div>
<p>or this:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>tinyoperations<span class="sc">::</span><span class="st">`</span><span class="at">%row~%</span><span class="st">`</span>(x, mat)</span></code></pre></div>
<p>is very cumbersome.</p>
<p>Therefore, <code>tinyoperations</code> also adds the
<code>import_inops()</code> function, which exposes the infix operators.
The infix operators are exposed to the current environment (like the
global environment, or the environment within a function), but does not
attach the functions to the namespace.</p>
<p>For example, to expose the infix operators in the alias object from
before to the current environment, one can do the following:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">import_inops</span>(<span class="at">expose =</span> tdt.)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co">#&gt; Checking for conflicting infix operators in the current environment...</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co">#&gt; Placing infix operators in current environment...</span></span></code></pre></div>
<p>One can give the <code>unexpose</code> argument instead of the
<code>expose</code> argument, which will delete the infix operators from
those packages/package alias exposed in the current environment by
<code>import_inops()</code>. Infix operators defined by the user will
not be touched. For example:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">import_inops</span>(<span class="at">unexpose =</span> tdt.)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co">#&gt; unexposing infix operators...</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="co">#&gt; Done</span></span></code></pre></div>
<p>One can also expose and unexpose the infix operators directly from a
package, instead of via an alias object. In that case the package name
must be given as a string.</p>
<p>For example, the following code exposes the infix operators from the
<a href="https://github.com/Rdatatable/data.table">data.table</a> R
package:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">import_inops</span>(<span class="at">expose =</span><span class="st">&quot;data.table&quot;</span>)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co">#&gt; Checking for conflicting infix operators in the current environment...</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="co">#&gt; Placing infix operators in current environment...</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co">#&gt; Done</span></span></code></pre></div>
<p>And similarly one can remove the exposed infix operators again from
the current environment as follows:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">import_inops</span>(<span class="at">unexpose =</span> <span class="st">&quot;data.table&quot;</span>)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co">#&gt; checking for infix operators exposed to the current environment by `import_inops()` ...</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="co">#&gt; Removing the following infix operators:</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co">#&gt; %between%, %chin%, %flike%, %ilike%, %inrange%, %like%, :=</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co">#&gt; Done</span></span></code></pre></div>
<p> </p>
<p>The <code>import_inops()</code> function has the <code>exclude</code>
and <code>include.only</code> arguments to specify exactly which infix
operators to expose to the current environment, as well as the
<code>overwrite</code> and <code>inherits</code> arguments to specify
what to do when the infix operators you are about to expose already
exist in the current environment (and loaded namespaces). This can be
handy to prevent overwriting any (user defined) infix operators already
present in the current environment or loaded namespaces.</p>
<p>Examples:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">import_inops</span>(<span class="at">expose =</span> tdt., <span class="at">include.only =</span> <span class="st">&quot;:=&quot;</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="co">#&gt; Checking for conflicting infix operators in the current environment...</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="co">#&gt; Placing infix operators in current environment...</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="fu">import_inops</span>(<span class="at">unexpose =</span> tdt.)</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="co">#&gt; unexposing infix operators...</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="co">#&gt; Done</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="fu">import_inops</span>(<span class="at">expose =</span> <span class="st">&quot;data.table&quot;</span>, , <span class="at">include.only =</span> <span class="st">&quot;:=&quot;</span>)</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="co">#&gt; Checking for conflicting infix operators in the current environment...</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="co">#&gt; Placing infix operators in current environment...</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="co">#&gt; Done</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="fu">import_inops</span>(<span class="at">unexpose =</span> <span class="st">&quot;data.table&quot;</span>)</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="co">#&gt; checking for infix operators exposed to the current environment by `import_inops()` ...</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="co">#&gt; Removing the following infix operators:</span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="co">#&gt; :=</span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="co">#&gt; Done</span></span></code></pre></div>
<p> </p>
<p>If the user would rather attach the infix operators to the (global)
namespace, <code>tinyoperations</code> provides the
<code>pkg_lsf()</code> function, which returns a character vector
listing all functions or infix operators from a package. This vector can
then be used in the <code>include.only</code> argument of the
<code>library()</code> function. Like so:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">library</span>(magrittr, <span class="at">include.only =</span> <span class="fu">pkg_lsf</span>(<span class="st">&quot;magrittr&quot;</span>, <span class="at">type =</span> <span class="st">&quot;inops&quot;</span>))</span></code></pre></div>
<p> </p>
</div>
<div id="import_data" class="section level1">
<h1>import_data</h1>
<p>The <code>import_as()</code> and <code>import_inops()</code>
functions get all functions from the package namespace. But packages
often also have data sets, which are often not part of the
namespace.</p>
<p>The <code>data()</code> function in core R can already load data from
packages, but this function loads the data into the global environment,
instead of returning the data directly, making assigning the data to a
specific variable a bit annoying. Therefore, the
<code>tinyoperations</code> package introduces the
<code>import_data()</code> function, which directly returns a data set
from a package.</p>
<p>For example, to import the <code>chicago</code> data set from the <a href="https://github.com/cran/gamair">gamair</a> R package, and assign
it directly to a variable (without having to do re-assignment and so
on), one simply runs the following:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">import_data</span>(<span class="st">&quot;chicago&quot;</span>, <span class="st">&quot;gamair&quot;</span>)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="co">#&gt;   death pm10median pm25median  o3median  so2median    time tmpd</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co">#&gt; 1   130 -7.4335443         NA -19.59234  1.9280426 -2556.5 31.5</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="co">#&gt; 2   150         NA         NA -19.03861 -0.9855631 -2555.5 33.0</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="co">#&gt; 3   101 -0.8265306         NA -20.21734 -1.8914161 -2554.5 33.0</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="co">#&gt; 4   135  5.5664557         NA -19.67567  6.1393413 -2553.5 29.0</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="co">#&gt; 5   126         NA         NA -19.21734  2.2784649 -2552.5 32.0</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="co">#&gt; 6   130  6.5664557         NA -17.63400  9.8585839 -2551.5 40.0</span></span></code></pre></div>
<p> </p>
</div>
<div id="an-example" class="section level1">
<h1>An example</h1>
<p>One R package that could benefit from the import system introduced by
<code>tinyoperations</code>, is the <a href="https://github.com/tidyverse/dplyr">dplyr</a> R package. The <a href="https://github.com/tidyverse/dplyr">dplyr</a> R package overwrites
<strong>core R</strong> functions (including base R) and it overwrites
functions from pre-installed recommended R packages (such as
<code>MASS</code>). I.e.:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>()) <span class="co"># clearing environment again</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="fu">library</span>(MASS)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># &lt;- notice dplyr overwrites base R and recommended R packages</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co">#&gt; Warning: package &#39;dplyr&#39; was built under R version 4.3.1</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co">#&gt; Attaching package: &#39;dplyr&#39;</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="co">#&gt; The following object is masked from &#39;package:MASS&#39;:</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="co">#&gt;     select</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from &#39;package:stats&#39;:</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="co">#&gt;     filter, lag</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from &#39;package:base&#39;:</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a><span class="co"># detaching dplyr again:</span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a><span class="fu">detach</span>(<span class="st">&quot;package:dplyr&quot;</span>)</span></code></pre></div>
<p>Moreover, <a href="https://github.com/tidyverse/dplyr">dplyr</a>’s
function names are sometimes generic enough that there is no obvious way
to tell if a function came from <a href="https://github.com/tidyverse/dplyr">dplyr</a> or some other
package (for comparison: one can generally recognize
<code>stringi</code> functions as they all start with
<code>stri_</code>). If you look at the CRAN page for <a href="https://github.com/tidyverse/dplyr">dplyr</a>, you’ll notice it
has some interesting extensions you might want to use, such as <a href="https://github.com/moodymudskipper/powerjoin">powerjoin</a>.</p>
<p>To prevent masking base R functions, and to prevent obscurity
regarding which functions come from <a href="https://github.com/tidyverse/dplyr">dplyr</a> and <a href="https://github.com/moodymudskipper/powerjoin">powerjoin</a>, and
which functions come from core R, one could constantly use
<code>dplyr::</code> and <code>powerjoin::</code>. But constantly
switching between package prefixes or aliases is perhaps
undesirable.</p>
<p>So here <code>tinyoperations</code>’ <code>import_as()</code>
function might help. Below is an example where <a href="https://github.com/tidyverse/dplyr">dplyr</a> is loaded (including
its re-exports), along with <a href="https://github.com/moodymudskipper/powerjoin">powerjoin</a> (which
is an extension), all under one alias which I’ll call
“<code>dpr.</code>”. Moreover, all infix operators from
<code>magrittr</code> are exposed to the current environment.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">import_as</span>(</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  dpr., <span class="st">&quot;dplyr&quot;</span>, <span class="at">extensions =</span> <span class="st">&quot;powerjoin&quot;</span>, <span class="at">lib.loc =</span> <span class="fu">.libPaths</span>()</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>)</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="co">#&gt; Importing packages...</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="co">#&gt; Done</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="co">#&gt; You can now access the functions using `dpr.$`</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="co">#&gt; Methods will work like normally </span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="co">#&gt; For conflicts report, packages order, and other attributes, run `attr.import(dpr.)`</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="fu">import_inops</span>(<span class="st">&quot;magrittr&quot;</span>) <span class="co"># getting the infix operators from `magrittr`</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a><span class="co">#&gt; Checking for conflicting infix operators in the current environment...</span></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="co">#&gt; Placing infix operators in current environment...</span></span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a><span class="co">#&gt; Done</span></span></code></pre></div>
<p>The functions from <a href="https://github.com/tidyverse/dplyr">dplyr</a> can now be used with
the <code>dpr.$</code> prefix. This way, base R functions are no longer
overwritten, and it will be clear for someone who reads your code
whether functions like the <code>filter()</code> function is the base R
filter function, or the <a href="https://github.com/tidyverse/dplyr">dplyr</a> filter function, as
the latter would be called as <code>dpr.$filter()</code>.</p>
<p>Let’s first run a simple example code with the loaded functions:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">import_data</span>(<span class="st">&quot;starwars&quot;</span>, <span class="st">&quot;dplyr&quot;</span>)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>d <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>  dpr.<span class="sc">$</span><span class="fu">filter</span>(.data<span class="sc">$</span>species <span class="sc">==</span> <span class="st">&quot;Droid&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># notice the pronoun can be used without problems</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>  dpr.<span class="sc">$</span><span class="fu">select</span>(name, dpr.<span class="sc">$</span><span class="fu">ends_with</span>(<span class="st">&quot;color&quot;</span>))</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 4</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="co">#&gt;   name   hair_color skin_color  eye_color</span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;    </span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="co">#&gt; 1 C-3PO  &lt;NA&gt;       gold        yellow   </span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="co">#&gt; 2 R2-D2  &lt;NA&gt;       white, blue red      </span></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a><span class="co">#&gt; 3 R5-D4  &lt;NA&gt;       white, red  red      </span></span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a><span class="co">#&gt; 4 IG-88  none       metal       red      </span></span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a><span class="co">#&gt; 5 R4-P17 none       silver, red red, blue</span></span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a><span class="co">#&gt; 6 BB8    none       none        black</span></span></code></pre></div>
<p>Just add <code>dpr.$</code> in front of the functions you’d normally
use, and everything works just as expected.</p>
<p>Now lets run an example from the <a href="https://github.com/moodymudskipper/powerjoin">powerjoin</a> GitHub
page (<a href="https://github.com/moodymudskipper/powerjoin" class="uri">https://github.com/moodymudskipper/powerjoin</a>), using the
above alias:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>male_penguins <span class="ot">&lt;-</span> dpr.<span class="sc">$</span><span class="fu">tribble</span>(</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>     <span class="sc">~</span>name,    <span class="sc">~</span>species,     <span class="sc">~</span>island, <span class="sc">~</span>flipper_length_mm, <span class="sc">~</span>body_mass_g,</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a> <span class="st">&quot;Giordan&quot;</span>,    <span class="st">&quot;Gentoo&quot;</span>,    <span class="st">&quot;Biscoe&quot;</span>,               222L,        5250L,</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>  <span class="st">&quot;Lynden&quot;</span>,    <span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Torgersen&quot;</span>,               190L,        3900L,</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>  <span class="st">&quot;Reiner&quot;</span>,    <span class="st">&quot;Adelie&quot;</span>,     <span class="st">&quot;Dream&quot;</span>,               185L,        3650L</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>)</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>female_penguins <span class="ot">&lt;-</span> dpr.<span class="sc">$</span><span class="fu">tribble</span>(</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>     <span class="sc">~</span>name,    <span class="sc">~</span>species,  <span class="sc">~</span>island, <span class="sc">~</span>flipper_length_mm, <span class="sc">~</span>body_mass_g,</span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>  <span class="st">&quot;Alonda&quot;</span>,    <span class="st">&quot;Gentoo&quot;</span>, <span class="st">&quot;Biscoe&quot;</span>,               <span class="dv">211</span>,        4500L,</span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a>     <span class="st">&quot;Ola&quot;</span>,    <span class="st">&quot;Adelie&quot;</span>,  <span class="st">&quot;Dream&quot;</span>,               <span class="dv">190</span>,        3600L,</span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a><span class="st">&quot;Mishayla&quot;</span>,    <span class="st">&quot;Gentoo&quot;</span>, <span class="st">&quot;Biscoe&quot;</span>,               <span class="dv">215</span>,        4750L,</span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a>)</span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a>dpr.<span class="sc">$</span><span class="fu">check_specs</span>()</span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a><span class="co">#&gt; # powerjoin check specifications</span></span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a><span class="co">#&gt; ℹ implicit_keys</span></span>
<span id="cb17-17"><a href="#cb17-17" tabindex="-1"></a><span class="co">#&gt; → column_conflict</span></span>
<span id="cb17-18"><a href="#cb17-18" tabindex="-1"></a><span class="co">#&gt; → duplicate_keys_left</span></span>
<span id="cb17-19"><a href="#cb17-19" tabindex="-1"></a><span class="co">#&gt; → duplicate_keys_right</span></span>
<span id="cb17-20"><a href="#cb17-20" tabindex="-1"></a><span class="co">#&gt; → unmatched_keys_left</span></span>
<span id="cb17-21"><a href="#cb17-21" tabindex="-1"></a><span class="co">#&gt; → unmatched_keys_right</span></span>
<span id="cb17-22"><a href="#cb17-22" tabindex="-1"></a><span class="co">#&gt; → missing_key_combination_left</span></span>
<span id="cb17-23"><a href="#cb17-23" tabindex="-1"></a><span class="co">#&gt; → missing_key_combination_right</span></span>
<span id="cb17-24"><a href="#cb17-24" tabindex="-1"></a><span class="co">#&gt; → inconsistent_factor_levels</span></span>
<span id="cb17-25"><a href="#cb17-25" tabindex="-1"></a><span class="co">#&gt; → inconsistent_type</span></span>
<span id="cb17-26"><a href="#cb17-26" tabindex="-1"></a><span class="co">#&gt; → grouped_input</span></span>
<span id="cb17-27"><a href="#cb17-27" tabindex="-1"></a><span class="co">#&gt; → na_keys</span></span>
<span id="cb17-28"><a href="#cb17-28" tabindex="-1"></a></span>
<span id="cb17-29"><a href="#cb17-29" tabindex="-1"></a>dpr.<span class="sc">$</span><span class="fu">power_inner_join</span>(</span>
<span id="cb17-30"><a href="#cb17-30" tabindex="-1"></a>  male_penguins[<span class="fu">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;island&quot;</span>)],</span>
<span id="cb17-31"><a href="#cb17-31" tabindex="-1"></a>  female_penguins[<span class="fu">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;island&quot;</span>)]</span>
<span id="cb17-32"><a href="#cb17-32" tabindex="-1"></a>)</span>
<span id="cb17-33"><a href="#cb17-33" tabindex="-1"></a><span class="co">#&gt; Joining, by = c(&quot;species&quot;, &quot;island&quot;)</span></span>
<span id="cb17-34"><a href="#cb17-34" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 2</span></span>
<span id="cb17-35"><a href="#cb17-35" tabindex="-1"></a><span class="co">#&gt;   species island</span></span>
<span id="cb17-36"><a href="#cb17-36" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt; </span></span>
<span id="cb17-37"><a href="#cb17-37" tabindex="-1"></a><span class="co">#&gt; 1 Gentoo  Biscoe</span></span>
<span id="cb17-38"><a href="#cb17-38" tabindex="-1"></a><span class="co">#&gt; 2 Gentoo  Biscoe</span></span>
<span id="cb17-39"><a href="#cb17-39" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Dream</span></span></code></pre></div>
<p>Notice that the only change made, is that all functions start with
<code>dpr.$</code>, the rest is the same. No need for constantly
switching between <code>dplyr::...</code>, <code>powerjoin::...</code>
and so on - yet it is still clear from the code that the functions came
from the <a href="https://github.com/tidyverse/dplyr">dplyr</a> + <a href="https://github.com/moodymudskipper/powerjoin">powerjoin</a>
family, and there is no fear of overwriting functions from other R
packages - let alone core R functions.</p>
<p> </p>
<p>To show that <code>import_as()</code> actually does load all exported
functions, including re-exports, consider the following proof:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">import_as</span>(dpr., <span class="st">&quot;dplyr&quot;</span>, <span class="at">re_exports =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="co">#&gt; Importing packages...</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="co">#&gt; Done</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="co">#&gt; You can now access the functions using `dpr.$`</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="co">#&gt; Methods will work like normally </span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="co">#&gt; For conflicts report, packages order, and other attributes, run `attr.import(dpr.)`</span></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>out <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">names</span>(dpr.), <span class="st">&quot;.__attributes__.&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">sort</span>()</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>foo <span class="ot">&lt;-</span> <span class="fu">loadNamespace</span>(<span class="st">&quot;dplyr&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">getNamespaceExports</span>()</span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a>check <span class="ot">&lt;-</span> <span class="fu">all</span>(out <span class="sc">==</span> <span class="fu">sort</span>(foo))</span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="fu">print</span>(check) <span class="co"># must be TRUE</span></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">isTRUE</span>(check)) {</span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">&quot;Tony is really stupid&quot;</span>)</span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a>}</span></code></pre></div>
<p> </p>
</div>
<div id="source-modules" class="section level1">
<h1>Source modules</h1>
<p>The <code>source_selection()</code> function is the same as base R’s
<code>source()</code> function, except that it allows only placing the
selected objects and functions into the current environment, instead of
all objects.</p>
<p>The objects to be selected can be specified using any combination of
the following:</p>
<ul>
<li>by supplying a character vector of exact object names to the
<code>select</code> argument.</li>
<li>by supplying a character vector of <code>regex</code> patterns to
the <code>regex</code> argument.</li>
<li>by supplying a character vector of <code>fixed</code> patterns to
the <code>fixed</code> argument.</li>
</ul>
<p>The <code>regex</code> and <code>fixed</code> arguments are
especially handy when sourcing S3 methods. For example, to expose the
following methods to the current environment,
<code>mymethod.numeric()</code> and <code>mymethod.character()</code>
from generic <code>mymethod()</code>, one could specify
<code>regex = &quot;^mymethod&quot;</code>.</p>
<p>Example:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>exprs <span class="ot">&lt;-</span> <span class="fu">expression</span>({</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>  helloworld <span class="ot">=</span> <span class="cf">function</span>()<span class="fu">print</span>(<span class="st">&quot;helloworld&quot;</span>)</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>  goodbyeworld <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">print</span>(<span class="st">&quot;goodbye world&quot;</span>)</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>  <span class="st">`</span><span class="at">%s+test%</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="cf">function</span>(x,y) stringi<span class="sc">::</span><span class="st">`</span><span class="at">%s+%</span><span class="st">`</span>(x,y)</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>  <span class="st">`</span><span class="at">%s*test%</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="cf">function</span>(x,y) stringi<span class="sc">::</span><span class="st">`</span><span class="at">%s*%</span><span class="st">`</span>(x,y)</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>  mymethod <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">UseMethod</span>(<span class="st">&quot;mymethod&quot;</span>, x)</span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a>  mymethod.numeric <span class="ot">&lt;-</span> <span class="cf">function</span>(x)x <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a>  mymethod.character <span class="ot">&lt;-</span> <span class="cf">function</span>(x)<span class="fu">chartr</span>(x, <span class="at">old =</span> <span class="st">&quot;a-zA-Z&quot;</span>, <span class="at">new =</span> <span class="st">&quot;A-Za-z&quot;</span>)</span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a>})</span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a>temp.fun <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a>  <span class="fu">source_selection</span>(<span class="fu">list</span>(<span class="at">exprs=</span>exprs), <span class="at">regex=</span> <span class="st">&quot;^mymethod&quot;</span>, <span class="at">fixed =</span> <span class="fu">c</span>(<span class="st">&quot;%&quot;</span>, <span class="st">&quot;:=&quot;</span>))</span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a>  <span class="fu">ls</span>() <span class="co"># list all objects residing within the function definition</span></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a>}</span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a><span class="fu">temp.fun</span>()</span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a><span class="co">#&gt; Importing module ...</span></span>
<span id="cb19-17"><a href="#cb19-17" tabindex="-1"></a><span class="co">#&gt; Done</span></span>
<span id="cb19-18"><a href="#cb19-18" tabindex="-1"></a><span class="co">#&gt; [1] &quot;%s*test%&quot;           &quot;%s+test%&quot;           &quot;mymethod&quot;          </span></span>
<span id="cb19-19"><a href="#cb19-19" tabindex="-1"></a><span class="co">#&gt; [4] &quot;mymethod.character&quot; &quot;mymethod.numeric&quot;</span></span>
<span id="cb19-20"><a href="#cb19-20" tabindex="-1"></a></span>
<span id="cb19-21"><a href="#cb19-21" tabindex="-1"></a>temp.fun <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb19-22"><a href="#cb19-22" tabindex="-1"></a>  <span class="fu">source_selection</span>(<span class="fu">list</span>(<span class="at">exprs=</span>exprs), <span class="at">select =</span> <span class="fu">c</span>(<span class="st">&quot;helloworld&quot;</span>, <span class="st">&quot;goodbyeworld&quot;</span>))</span>
<span id="cb19-23"><a href="#cb19-23" tabindex="-1"></a>  <span class="fu">ls</span>() <span class="co"># list all objects residing within the function definition</span></span>
<span id="cb19-24"><a href="#cb19-24" tabindex="-1"></a>}</span>
<span id="cb19-25"><a href="#cb19-25" tabindex="-1"></a><span class="fu">temp.fun</span>()</span>
<span id="cb19-26"><a href="#cb19-26" tabindex="-1"></a><span class="co">#&gt; Importing module ... </span></span>
<span id="cb19-27"><a href="#cb19-27" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb19-28"><a href="#cb19-28" tabindex="-1"></a><span class="co">#&gt; Done</span></span>
<span id="cb19-29"><a href="#cb19-29" tabindex="-1"></a><span class="co">#&gt; [1] &quot;goodbyeworld&quot; &quot;helloworld&quot;</span></span></code></pre></div>
<p> </p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
