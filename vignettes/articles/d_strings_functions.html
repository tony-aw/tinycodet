<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>String related functions</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">String related functions</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(tinycodet)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co">#&gt; Run `?tinycodet::tinycodet` to open the introduction help page of &#39;tinycodet&#39;.</span></span></code></pre></div>
<p> </p>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>Virtually every programming language, even those primarily focused on
mathematics, will at some point have to deal with strings. R’s atomic
classes basically boil down to some form of either numbers or
characters. R’s numerical functions are generally very fast. But R’s
native string functions are somewhat slow, do not have a unified naming
scheme, and are not as comprehensive as R’s impressive numerical
functions.</p>
<p>The primary R-package that fixes this is ‘stringi’. ‘stringi’ is the
fastest and most comprehensive string manipulation package available at
the time of writing. Many string related packages fully depend on
‘stringi’. The ‘stringr’ package, for example, is merely a thin wrapper
around ‘stringi’.</p>
<p>The ‘tinycodet’ package adds a bit more functionality to the
‘stringi’ string manipulation capabilities.</p>
<p> </p>
</div>
<div id="stri_locate_ith" class="section level1">
<h1>stri_locate_ith</h1>
<p>Suppose one wants to transform the <strong>first</strong> vowels in
the strings of a character vector <code>str</code>, such that all upper
case vowels become lower case, and vice-versa. One can do that
completely in <code>stringi</code> + base R as follows:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;HELLO WORLD&quot;</span>, <span class="st">&quot;goodbye world&quot;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>loc <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_locate_first</span>(x, <span class="at">regex=</span><span class="st">&quot;a|e|i|o|u&quot;</span>, <span class="at">case_insensitive=</span><span class="cn">TRUE</span>)</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>extr <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_sub</span>(x, <span class="at">from=</span>loc)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>repl <span class="ot">&lt;-</span> <span class="fu">chartr</span>(extr, <span class="at">old =</span> <span class="st">&quot;a-zA-Z&quot;</span>, <span class="at">new =</span> <span class="st">&quot;A-Za-z&quot;</span>)</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>stringi<span class="sc">::</span><span class="fu">stri_sub_replace</span>(x, loc, <span class="at">replacement=</span>repl)</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co">#&gt; [1] &quot;HeLLO WORLD&quot;   &quot;gOodbye world&quot;</span></span></code></pre></div>
<p>But now suppose one wants to transform the
<strong>second-last</strong> vowel. How are you going to do that? It’s
not impossible, but also not super straight-forward. For clear code,
<code>stringi</code> really needs some kind of “stri_locate_ith”
function. And, of course, the <code>tinycodet</code> package provides
just that.</p>
<p>The <code>stri_locate_ith(str, i, ...)</code> function locates for
every element/string in character vector <code>str</code>, the <span class="math inline">\(i^\textrm{th}\)</span> occurrence of some
(regex/fixed/etc) pattern. When <code>i</code> is positive, the
occurrence is counted from left to right. Negative values for
<code>i</code> are also allowed, in which case the occurrence is counted
from the right to left. But <code>i=0</code> is not allowed though.
Thus, to get the <strong>second</strong> occurrence of some pattern, use
<code>i=2</code>, and to get the <strong>second-last</strong>
occurrence, use <code>i=-2</code>.</p>
<p>The <code>stri_locate_ith(str, i, ...)</code> function uses the exact
same argument and naming convention as <code>stringi</code>, to keep
your code consistent. And just like
<code>stringi::stri_locate_first/last</code>, the
<code>stri_locate_ith(str, i, ...)</code> function is a vectorized
function: <code>str</code> and <code>i</code> as well as the pattern
(<code>regex, fixed, coll, charclass</code>) can all be different-valued
vectors.</p>
<p> </p>
<p>To transform the <strong>second-last</strong> occurrence, one can now
use <code>stri_locate_ith()</code> in a very similar way as was done
with <code>stri_locate_first/last</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;HELLO WORLD&quot;</span>, <span class="st">&quot;goodbye world&quot;</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>loc <span class="ot">&lt;-</span> <span class="fu">stri_locate_ith</span>( <span class="co"># this part is the key-difference</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>  x, <span class="sc">-</span><span class="dv">2</span>, <span class="at">regex=</span><span class="st">&quot;a|e|i|o|u&quot;</span>, <span class="at">case_insensitive=</span><span class="cn">TRUE</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>extr <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_sub</span>(x, <span class="at">from=</span>loc)</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>repl <span class="ot">&lt;-</span> <span class="fu">chartr</span>(extr, <span class="at">old =</span> <span class="st">&quot;a-zA-Z&quot;</span>, <span class="at">new =</span> <span class="st">&quot;A-Za-z&quot;</span>)</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>stringi<span class="sc">::</span><span class="fu">stri_sub_replace</span>(x, loc, <span class="at">replacement=</span>repl)</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="co">#&gt; [1] &quot;HELLo WORLD&quot;   &quot;goodbyE world&quot;</span></span></code></pre></div>
<p>Notice that the code is virtually equivalent. We <em>only</em> need
to change the locate function.</p>
<p> </p>
<p>There is also the <code>stri_locate_ith_boundaries()</code> function,
which of course locates the <span class="math inline">\(i^\textrm{th}\)</span> text boundary.</p>
<p> </p>
</div>
<div id="strcut_---functions" class="section level1">
<h1>strcut_ - functions</h1>
<p>The <code>tinycodet</code> R package adds 2 <code>strcut</code>
functions: <code>strcut_loc()</code> and <code>strcut_brk()</code>.</p>
<p>The <code>strcut_loc()</code>function cuts every string in a
character vector around a location range <code>loc</code>, such that
every string is cut into the following parts:</p>
<ul>
<li>the sub-string <strong>before</strong> <code>loc</code>;</li>
<li>the sub-string at <code>loc</code> itself;</li>
<li>the sub-string <strong>after</strong> <code>loc</code>.</li>
</ul>
<p>The location range <code>loc</code> would usually be matrix with 2
columns, giving the start and end points of some pattern match.</p>
<p>The <code>strcut_brk()</code> function is basically a wrapper around
<code>stringi::stri_split_boundaries(..., simplify=NA)</code>, and with
some more conveniently named arguments.</p>
<p>Examples:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">paste0</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">collapse=</span><span class="st">&quot;&quot;</span>), <span class="dv">10</span>)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="fu">print</span>(x)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;12345678910&quot; &quot;12345678910&quot; &quot;12345678910&quot; &quot;12345678910&quot; &quot;12345678910&quot;</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">#&gt;  [6] &quot;12345678910&quot; &quot;12345678910&quot; &quot;12345678910&quot; &quot;12345678910&quot; &quot;12345678910&quot;</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>loc <span class="ot">&lt;-</span> <span class="fu">stri_locate_ith</span>(x, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">fixed =</span> <span class="fu">as.character</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>))</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="fu">strcut_loc</span>(x, loc)</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co">#&gt;       prepart     mainpart postpart    </span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co">#&gt;  [1,] &quot;&quot;          &quot;1&quot;      &quot;2345678910&quot;</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="co">#&gt;  [2,] &quot;1&quot;         &quot;2&quot;      &quot;345678910&quot; </span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">#&gt;  [3,] &quot;12&quot;        &quot;3&quot;      &quot;45678910&quot;  </span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="co">#&gt;  [4,] &quot;123&quot;       &quot;4&quot;      &quot;5678910&quot;   </span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co">#&gt;  [5,] &quot;1234&quot;      &quot;5&quot;      &quot;678910&quot;    </span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="co">#&gt;  [6,] &quot;12345&quot;     &quot;6&quot;      &quot;78910&quot;     </span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="co">#&gt;  [7,] &quot;123456&quot;    &quot;7&quot;      &quot;8910&quot;      </span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="co">#&gt;  [8,] &quot;1234567&quot;   &quot;8&quot;      &quot;910&quot;       </span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="co">#&gt;  [9,] &quot;12345678&quot;  &quot;9&quot;      &quot;10&quot;        </span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a><span class="co">#&gt; [10,] &quot;123456789&quot; &quot;10&quot;     &quot;&quot;</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a><span class="fu">strcut_loc</span>(x, <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">5</span>))</span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a><span class="co">#&gt;       prepart mainpart postpart</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a><span class="co">#&gt;  [1,] &quot;1234&quot;  &quot;5&quot;      &quot;678910&quot;</span></span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a><span class="co">#&gt;  [2,] &quot;1234&quot;  &quot;5&quot;      &quot;678910&quot;</span></span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a><span class="co">#&gt;  [3,] &quot;1234&quot;  &quot;5&quot;      &quot;678910&quot;</span></span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a><span class="co">#&gt;  [4,] &quot;1234&quot;  &quot;5&quot;      &quot;678910&quot;</span></span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a><span class="co">#&gt;  [5,] &quot;1234&quot;  &quot;5&quot;      &quot;678910&quot;</span></span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a><span class="co">#&gt;  [6,] &quot;1234&quot;  &quot;5&quot;      &quot;678910&quot;</span></span>
<span id="cb4-27"><a href="#cb4-27" tabindex="-1"></a><span class="co">#&gt;  [7,] &quot;1234&quot;  &quot;5&quot;      &quot;678910&quot;</span></span>
<span id="cb4-28"><a href="#cb4-28" tabindex="-1"></a><span class="co">#&gt;  [8,] &quot;1234&quot;  &quot;5&quot;      &quot;678910&quot;</span></span>
<span id="cb4-29"><a href="#cb4-29" tabindex="-1"></a><span class="co">#&gt;  [9,] &quot;1234&quot;  &quot;5&quot;      &quot;678910&quot;</span></span>
<span id="cb4-30"><a href="#cb4-30" tabindex="-1"></a><span class="co">#&gt; [10,] &quot;1234&quot;  &quot;5&quot;      &quot;678910&quot;</span></span>
<span id="cb4-31"><a href="#cb4-31" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" tabindex="-1"></a></span>
<span id="cb4-33"><a href="#cb4-33" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;The above-mentioned    features are very useful. &quot;</span>,</span>
<span id="cb4-34"><a href="#cb4-34" tabindex="-1"></a><span class="st">&quot;Spam, spam, eggs, bacon, and spam. 123 456 789&quot;</span>)</span>
<span id="cb4-35"><a href="#cb4-35" tabindex="-1"></a><span class="fu">strcut_brk</span>(test, <span class="st">&quot;line&quot;</span>)</span>
<span id="cb4-36"><a href="#cb4-36" tabindex="-1"></a><span class="co">#&gt;      [,1]     [,2]     [,3]            [,4]        [,5]   [,6]     [,7]      </span></span>
<span id="cb4-37"><a href="#cb4-37" tabindex="-1"></a><span class="co">#&gt; [1,] &quot;The &quot;   &quot;above-&quot; &quot;mentioned    &quot; &quot;features &quot; &quot;are &quot; &quot;very &quot;  &quot;useful. &quot;</span></span>
<span id="cb4-38"><a href="#cb4-38" tabindex="-1"></a><span class="co">#&gt; [2,] &quot;Spam, &quot; &quot;spam, &quot; &quot;eggs, &quot;        &quot;bacon, &quot;   &quot;and &quot; &quot;spam. &quot; &quot;123 &quot;    </span></span>
<span id="cb4-39"><a href="#cb4-39" tabindex="-1"></a><span class="co">#&gt;      [,8]   [,9] </span></span>
<span id="cb4-40"><a href="#cb4-40" tabindex="-1"></a><span class="co">#&gt; [1,] NA     NA   </span></span>
<span id="cb4-41"><a href="#cb4-41" tabindex="-1"></a><span class="co">#&gt; [2,] &quot;456 &quot; &quot;789&quot;</span></span>
<span id="cb4-42"><a href="#cb4-42" tabindex="-1"></a><span class="fu">strcut_brk</span>(test, <span class="st">&quot;word&quot;</span>)</span>
<span id="cb4-43"><a href="#cb4-43" tabindex="-1"></a><span class="co">#&gt;      [,1]   [,2] [,3]    [,4]   [,5]        [,6]   [,7]       [,8] [,9] </span></span>
<span id="cb4-44"><a href="#cb4-44" tabindex="-1"></a><span class="co">#&gt; [1,] &quot;The&quot;  &quot; &quot;  &quot;above&quot; &quot;-&quot;    &quot;mentioned&quot; &quot;    &quot; &quot;features&quot; &quot; &quot;  &quot;are&quot;</span></span>
<span id="cb4-45"><a href="#cb4-45" tabindex="-1"></a><span class="co">#&gt; [2,] &quot;Spam&quot; &quot;,&quot;  &quot; &quot;     &quot;spam&quot; &quot;,&quot;         &quot; &quot;    &quot;eggs&quot;     &quot;,&quot;  &quot; &quot;  </span></span>
<span id="cb4-46"><a href="#cb4-46" tabindex="-1"></a><span class="co">#&gt;      [,10]   [,11]  [,12] [,13]    [,14] [,15]  [,16] [,17] [,18] [,19] [,20]</span></span>
<span id="cb4-47"><a href="#cb4-47" tabindex="-1"></a><span class="co">#&gt; [1,] &quot; &quot;     &quot;very&quot; &quot; &quot;   &quot;useful&quot; &quot;.&quot;   &quot; &quot;    NA    NA    NA    NA    NA   </span></span>
<span id="cb4-48"><a href="#cb4-48" tabindex="-1"></a><span class="co">#&gt; [2,] &quot;bacon&quot; &quot;,&quot;    &quot; &quot;   &quot;and&quot;    &quot; &quot;   &quot;spam&quot; &quot;.&quot;   &quot; &quot;   &quot;123&quot; &quot; &quot;   &quot;456&quot;</span></span>
<span id="cb4-49"><a href="#cb4-49" tabindex="-1"></a><span class="co">#&gt;      [,21] [,22]</span></span>
<span id="cb4-50"><a href="#cb4-50" tabindex="-1"></a><span class="co">#&gt; [1,] NA    NA   </span></span>
<span id="cb4-51"><a href="#cb4-51" tabindex="-1"></a><span class="co">#&gt; [2,] &quot; &quot;   &quot;789&quot;</span></span>
<span id="cb4-52"><a href="#cb4-52" tabindex="-1"></a><span class="fu">strcut_brk</span>(test, <span class="st">&quot;sentence&quot;</span>)</span>
<span id="cb4-53"><a href="#cb4-53" tabindex="-1"></a><span class="co">#&gt;      [,1]                                                [,2]         </span></span>
<span id="cb4-54"><a href="#cb4-54" tabindex="-1"></a><span class="co">#&gt; [1,] &quot;The above-mentioned    features are very useful. &quot; NA           </span></span>
<span id="cb4-55"><a href="#cb4-55" tabindex="-1"></a><span class="co">#&gt; [2,] &quot;Spam, spam, eggs, bacon, and spam. &quot;               &quot;123 456 789&quot;</span></span>
<span id="cb4-56"><a href="#cb4-56" tabindex="-1"></a><span class="fu">strcut_brk</span>(test, <span class="st">&quot;character&quot;</span>)</span>
<span id="cb4-57"><a href="#cb4-57" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]</span></span>
<span id="cb4-58"><a href="#cb4-58" tabindex="-1"></a><span class="co">#&gt; [1,] &quot;T&quot;  &quot;h&quot;  &quot;e&quot;  &quot; &quot;  &quot;a&quot;  &quot;b&quot;  &quot;o&quot;  &quot;v&quot;  &quot;e&quot;  &quot;-&quot;   &quot;m&quot;   &quot;e&quot;   &quot;n&quot;   &quot;t&quot;  </span></span>
<span id="cb4-59"><a href="#cb4-59" tabindex="-1"></a><span class="co">#&gt; [2,] &quot;S&quot;  &quot;p&quot;  &quot;a&quot;  &quot;m&quot;  &quot;,&quot;  &quot; &quot;  &quot;s&quot;  &quot;p&quot;  &quot;a&quot;  &quot;m&quot;   &quot;,&quot;   &quot; &quot;   &quot;e&quot;   &quot;g&quot;  </span></span>
<span id="cb4-60"><a href="#cb4-60" tabindex="-1"></a><span class="co">#&gt;      [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]</span></span>
<span id="cb4-61"><a href="#cb4-61" tabindex="-1"></a><span class="co">#&gt; [1,] &quot;i&quot;   &quot;o&quot;   &quot;n&quot;   &quot;e&quot;   &quot;d&quot;   &quot; &quot;   &quot; &quot;   &quot; &quot;   &quot; &quot;   &quot;f&quot;   &quot;e&quot;   &quot;a&quot;  </span></span>
<span id="cb4-62"><a href="#cb4-62" tabindex="-1"></a><span class="co">#&gt; [2,] &quot;g&quot;   &quot;s&quot;   &quot;,&quot;   &quot; &quot;   &quot;b&quot;   &quot;a&quot;   &quot;c&quot;   &quot;o&quot;   &quot;n&quot;   &quot;,&quot;   &quot; &quot;   &quot;a&quot;  </span></span>
<span id="cb4-63"><a href="#cb4-63" tabindex="-1"></a><span class="co">#&gt;      [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38]</span></span>
<span id="cb4-64"><a href="#cb4-64" tabindex="-1"></a><span class="co">#&gt; [1,] &quot;t&quot;   &quot;u&quot;   &quot;r&quot;   &quot;e&quot;   &quot;s&quot;   &quot; &quot;   &quot;a&quot;   &quot;r&quot;   &quot;e&quot;   &quot; &quot;   &quot;v&quot;   &quot;e&quot;  </span></span>
<span id="cb4-65"><a href="#cb4-65" tabindex="-1"></a><span class="co">#&gt; [2,] &quot;n&quot;   &quot;d&quot;   &quot; &quot;   &quot;s&quot;   &quot;p&quot;   &quot;a&quot;   &quot;m&quot;   &quot;.&quot;   &quot; &quot;   &quot;1&quot;   &quot;2&quot;   &quot;3&quot;  </span></span>
<span id="cb4-66"><a href="#cb4-66" tabindex="-1"></a><span class="co">#&gt;      [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49]</span></span>
<span id="cb4-67"><a href="#cb4-67" tabindex="-1"></a><span class="co">#&gt; [1,] &quot;r&quot;   &quot;y&quot;   &quot; &quot;   &quot;u&quot;   &quot;s&quot;   &quot;e&quot;   &quot;f&quot;   &quot;u&quot;   &quot;l&quot;   &quot;.&quot;   &quot; &quot;  </span></span>
<span id="cb4-68"><a href="#cb4-68" tabindex="-1"></a><span class="co">#&gt; [2,] &quot; &quot;   &quot;4&quot;   &quot;5&quot;   &quot;6&quot;   &quot; &quot;   &quot;7&quot;   &quot;8&quot;   &quot;9&quot;   NA    NA    NA</span></span></code></pre></div>
<p> </p>
</div>
<div id="matrix-re-ordering-operators" class="section level1">
<h1>Matrix re-ordering operators</h1>
<p>The matrix re-ordering operators are quite handy for re-ordering
strings, since the <code>strcut_</code> - functions return matrices, and
the <code>stri_join_mat()</code> and their aliases concatenate
matrices.</p>
<p>See the documentation on matrix operators: <code>?`%row~%`</code> and
<code>?`%col~%`</code></p>
<p>See also the “Miscellaneous functionality” article.</p>
<p> </p>
</div>
<div id="matrix-joining" class="section level1">
<h1>Matrix joining</h1>
<p>The <code>tinycodet</code> package adds a tiny additional function to
<code>stringi</code>:</p>
<p><code>stri_join_mat</code> (and their aliases <code>stri_c_mat</code>
and <code>stri_paste_mat</code>).</p>
<p>As the name suggests, these functions perform row-wise
(<code>margin=1</code>; the default) or column-wise
(<code>margin=2</code>) joining of a matrix of strings, thereby
transforming it to a vector of strings. You can do this already in base
R, but it requires converting the matrix to a data.frame or list, and
then calling <code>stri_join</code> inside <code>do.call()</code>, which
to me just seems too much trouble for something <em>soooo</em> abysmally
simple.</p>
<p>Here is an example of their usage when re-ordering strings, words, or
sentences :</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co"># sorting characters in strings:</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">paste</span>(<span class="fu">sample</span>(letters), <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>), <span class="fu">paste</span>(<span class="fu">sample</span>(letters), <span class="at">collapse =</span> <span class="st">&quot;&quot;</span>))</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="fu">print</span>(x)</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="co">#&gt; [1] &quot;qayhounpfjkzmelbcvrtiwdxsg&quot; &quot;gioczubmpsvjhrxqawyeldtfkn&quot;</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">strcut_brk</span>(x)</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>rank <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_rank</span>(<span class="fu">as.vector</span>(mat)) <span class="sc">|&gt;</span>  <span class="fu">matrix</span>(<span class="at">ncol=</span><span class="fu">ncol</span>(mat))</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>sorted <span class="ot">&lt;-</span> mat <span class="sc">%row~%</span> rank</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="fu">print</span>(sorted)</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co">#&gt; [1,] &quot;a&quot;  &quot;b&quot;  &quot;c&quot;  &quot;d&quot;  &quot;e&quot;  &quot;f&quot;  &quot;g&quot;  &quot;h&quot;  &quot;i&quot;  &quot;j&quot;   &quot;k&quot;   &quot;l&quot;   &quot;m&quot;   &quot;n&quot;  </span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="co">#&gt; [2,] &quot;a&quot;  &quot;b&quot;  &quot;c&quot;  &quot;d&quot;  &quot;e&quot;  &quot;f&quot;  &quot;g&quot;  &quot;h&quot;  &quot;i&quot;  &quot;j&quot;   &quot;k&quot;   &quot;l&quot;   &quot;m&quot;   &quot;n&quot;  </span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">#&gt;      [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="co">#&gt; [1,] &quot;o&quot;   &quot;p&quot;   &quot;q&quot;   &quot;r&quot;   &quot;s&quot;   &quot;t&quot;   &quot;u&quot;   &quot;v&quot;   &quot;w&quot;   &quot;x&quot;   &quot;y&quot;   &quot;z&quot;  </span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="co">#&gt; [2,] &quot;o&quot;   &quot;p&quot;   &quot;q&quot;   &quot;r&quot;   &quot;s&quot;   &quot;t&quot;   &quot;u&quot;   &quot;v&quot;   &quot;w&quot;   &quot;x&quot;   &quot;y&quot;   &quot;z&quot;</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="fu">stri_join_mat</span>(sorted, <span class="at">margin=</span><span class="dv">1</span>)</span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="co">#&gt; [1] &quot;abcdefghijklmnopqrstuvwxyz&quot; &quot;abcdefghijklmnopqrstuvwxyz&quot;</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="fu">stri_join_mat</span>(sorted, <span class="at">margin=</span><span class="dv">2</span>)</span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;aa&quot; &quot;bb&quot; &quot;cc&quot; &quot;dd&quot; &quot;ee&quot; &quot;ff&quot; &quot;gg&quot; &quot;hh&quot; &quot;ii&quot; &quot;jj&quot; &quot;kk&quot; &quot;ll&quot; &quot;mm&quot; &quot;nn&quot; &quot;oo&quot;</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="co">#&gt; [16] &quot;pp&quot; &quot;qq&quot; &quot;rr&quot; &quot;ss&quot; &quot;tt&quot; &quot;uu&quot; &quot;vv&quot; &quot;ww&quot; &quot;xx&quot; &quot;yy&quot; &quot;zz&quot;</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a><span class="co"># sorting words:</span></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2nd 3rd 1st&quot;</span>, <span class="st">&quot;Goodbye everyone&quot;</span>)</span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a><span class="fu">print</span>(x)</span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a><span class="co">#&gt; [1] &quot;2nd 3rd 1st&quot;      &quot;Goodbye everyone&quot;</span></span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">strcut_brk</span>(x, <span class="st">&quot;word&quot;</span>)</span>
<span id="cb5-27"><a href="#cb5-27" tabindex="-1"></a>rank <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_rank</span>(<span class="fu">as.vector</span>(mat)) <span class="sc">|&gt;</span> <span class="fu">matrix</span>(<span class="at">ncol=</span><span class="fu">ncol</span>(mat))</span>
<span id="cb5-28"><a href="#cb5-28" tabindex="-1"></a>sorted <span class="ot">&lt;-</span> mat <span class="sc">%row~%</span> rank</span>
<span id="cb5-29"><a href="#cb5-29" tabindex="-1"></a>sorted[<span class="fu">is.na</span>(sorted)] <span class="ot">&lt;-</span> <span class="st">&quot;&quot;</span></span>
<span id="cb5-30"><a href="#cb5-30" tabindex="-1"></a><span class="fu">stri_c_mat</span>(sorted, <span class="at">margin=</span><span class="dv">1</span>, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>) <span class="co"># &lt;- alias for stri_join_mat</span></span>
<span id="cb5-31"><a href="#cb5-31" tabindex="-1"></a><span class="co">#&gt; [1] &quot;    1st 2nd 3rd&quot;      &quot;  everyone Goodbye  &quot;</span></span>
<span id="cb5-32"><a href="#cb5-32" tabindex="-1"></a><span class="fu">stri_c_mat</span>(sorted, <span class="at">margin=</span><span class="dv">2</span>, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb5-33"><a href="#cb5-33" tabindex="-1"></a><span class="co">#&gt; [1] &quot;   &quot;         &quot;  everyone&quot;  &quot;1st Goodbye&quot; &quot;2nd &quot;        &quot;3rd &quot;</span></span>
<span id="cb5-34"><a href="#cb5-34" tabindex="-1"></a></span>
<span id="cb5-35"><a href="#cb5-35" tabindex="-1"></a><span class="co"># randomly shuffle sentences:</span></span>
<span id="cb5-36"><a href="#cb5-36" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Hello, who are you? Oh, really?! Cool!&quot;</span>, <span class="st">&quot;I don&#39;t care. But I really don&#39;t.&quot;</span>)</span>
<span id="cb5-37"><a href="#cb5-37" tabindex="-1"></a><span class="fu">print</span>(x)</span>
<span id="cb5-38"><a href="#cb5-38" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Hello, who are you? Oh, really?! Cool!&quot;</span></span>
<span id="cb5-39"><a href="#cb5-39" tabindex="-1"></a><span class="co">#&gt; [2] &quot;I don&#39;t care. But I really don&#39;t.&quot;</span></span>
<span id="cb5-40"><a href="#cb5-40" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">strcut_brk</span>(x, <span class="st">&quot;sentence&quot;</span>)</span>
<span id="cb5-41"><a href="#cb5-41" tabindex="-1"></a>rank <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(mat)) <span class="sc">|&gt;</span> <span class="fu">matrix</span>(<span class="at">ncol =</span> <span class="fu">ncol</span>(mat))</span>
<span id="cb5-42"><a href="#cb5-42" tabindex="-1"></a>sorted <span class="ot">&lt;-</span> mat <span class="sc">%row~%</span> rank</span>
<span id="cb5-43"><a href="#cb5-43" tabindex="-1"></a>sorted[<span class="fu">is.na</span>(sorted)] <span class="ot">&lt;-</span> <span class="st">&quot;&quot;</span></span>
<span id="cb5-44"><a href="#cb5-44" tabindex="-1"></a><span class="fu">stri_paste_mat</span>(sorted, <span class="at">margin=</span><span class="dv">1</span>) <span class="co"># &lt;- another alias for stri_join_mat</span></span>
<span id="cb5-45"><a href="#cb5-45" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Oh, really?! Cool!Hello, who are you? &quot;</span></span>
<span id="cb5-46"><a href="#cb5-46" tabindex="-1"></a><span class="co">#&gt; [2] &quot;I don&#39;t care. But I really don&#39;t.&quot;</span></span>
<span id="cb5-47"><a href="#cb5-47" tabindex="-1"></a><span class="fu">stri_paste_mat</span>(sorted, <span class="at">margin=</span><span class="dv">2</span>)</span>
<span id="cb5-48"><a href="#cb5-48" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Oh, really?! I don&#39;t care. &quot;            </span></span>
<span id="cb5-49"><a href="#cb5-49" tabindex="-1"></a><span class="co">#&gt; [2] &quot;Cool!&quot;                                  </span></span>
<span id="cb5-50"><a href="#cb5-50" tabindex="-1"></a><span class="co">#&gt; [3] &quot;Hello, who are you? But I really don&#39;t.&quot;</span></span></code></pre></div>
<p> </p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
