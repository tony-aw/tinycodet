<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Package import system</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Package import system</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(tinyoperations)</span></code></pre></div>
<p> </p>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>One can load a package without attaching the package (i.e. using
<code>::</code> or using a package alias), or one can attach a package
(i.e. using <code>library()</code> or <code>require()</code>). Both
options have their pros and cons, as you probably already know.</p>
<p>The advantages and disadvantages of loading without attaching a
package VS attaching a package - at least those relevant for this
article - can be compactly presented in the following table:</p>
<table>
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
aspect
</th>
<th style="text-align:left;">
alias / ::
</th>
<th style="text-align:left;">
attaching
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
prevent masking functions from other packages
</td>
<td style="text-align:left;">
Yes (+)
</td>
<td style="text-align:left;">
No (-)
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
prevent masking core R functions
</td>
<td style="text-align:left;">
Yes (+)
</td>
<td style="text-align:left;">
No (-)
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
clarify which function came from which package
</td>
<td style="text-align:left;">
Yes (+)
</td>
<td style="text-align:left;">
No (-)
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
expose functions only in current environment instead of globally
</td>
<td style="text-align:left;">
Yes (+)
</td>
<td style="text-align:left;">
No (-)
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:left;">
prevent namespace pollution
</td>
<td style="text-align:left;">
Yes (+)
</td>
<td style="text-align:left;">
No (-)
</td>
</tr>
<tr>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
minimize typing - especially for infix operators <br> (i.e. typing
<code>package::`%op%`(x, y)</code> instead of <code>x %op% y</code> is
cumbersome)
</td>
<td style="text-align:left;">
No (-)
</td>
<td style="text-align:left;">
Yes (+)
</td>
</tr>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:left;">
use multiple related packages, <br> without constantly switching between
package prefixes
</td>
<td style="text-align:left;">
No (-)
</td>
<td style="text-align:left;">
Yes (+)
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
NOTE: + = advantage, - = disavantage
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody>
</table>
<p>What <code>tinyoperations</code> attempts to do with its import
system, is to somewhat find the best of both worlds. Basically,
<code>tinyoperations</code> has functions that allow the following
import functionality lacking in base R:</p>
<ul>
<li>Allow package + its foreign exports + its dependencies + its
enhances + its extensions to be loaded under <strong>one alias</strong>.
This essentially combines the attaching advantage of using multiple
related packages (row 7 in table above), whilst keeping most advantages
of aliasing a package.</li>
<li>Allow <strong>exposing infix operators</strong> to the
<strong>current environment</strong>. This gains the attaching advantage
of less typing (row 6 in table above), whilst simultaneously avoiding
the disadvantage of attaching functions from a package globally (row
4).</li>
</ul>
<p><code>tinyoperations</code> also extends this functionality to also
work on <strong>sourced modules</strong>, but that is discussed in the
Article “Source modules”.</p>
<p>Just to clarify: I am not claiming this import system provided in the
<code>tinyoperations</code> package is always the best system or
whatever. This is just another option provided, just like the <a href="https://github.com/rticulate/import">import</a> and <a href="https://github.com/klmr/box">box</a> packages provide their own
alternative import systems. Please feel free to completely ignore this
article if you’re really adamant on attaching packages using
<code>library()</code>/<code>require()</code> :-).</p>
<p>This article is rather lengthy, so I will start with a quick example
code using <code>tinyoperations</code>’ import system:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># loading &quot;tidytable&quot; + its foreign exports + &quot;data.table&quot; under alias &quot;tdt.&quot;:</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">import_as</span>( </span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  tdt., <span class="st">&quot;tidytable&quot;</span>, <span class="at">dependencies =</span> <span class="st">&quot;data.table&quot;</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co">#&gt; Importing packages...</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">#&gt; Done</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co">#&gt; You can now access the functions using `tdt.$`.</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co">#&gt; (S3)methods will work like normally. </span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">#&gt; For conflicts report and package order, run `tdt.$.__attributes__.`.</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="co"># exposing operators from `magrrittr` to current environment:</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="fu">import_inops</span>(<span class="st">&quot;magrittr&quot;</span>)</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="co">#&gt; Getting infix operators from package: magrittr...</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="co">#&gt; Checking for conflicting infix operators in the current environment...</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="co">#&gt; Placing infix operators in current environment...</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="co">#&gt; Done</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="co"># directly assigning the &quot;starwars&quot; dataset to object &quot;d&quot;:</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">import_data</span>(<span class="st">&quot;starwars&quot;</span>, <span class="st">&quot;dplyr&quot;</span>) </span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a><span class="co"># see it in action:</span></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a>d <span class="sc">%&gt;%</span> tdt.<span class="sc">$</span><span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">&quot;Droid&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a>  tdt.<span class="sc">$</span><span class="fu">select</span>(name, tdt.<span class="sc">$</span><span class="fu">ends_with</span>(<span class="st">&quot;color&quot;</span>))</span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a><span class="co">#&gt; # A tidytable: 6 × 4</span></span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a><span class="co">#&gt;   name   hair_color skin_color  eye_color</span></span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;    </span></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a><span class="co">#&gt; 1 C-3PO  &lt;NA&gt;       gold        yellow   </span></span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a><span class="co">#&gt; 2 R2-D2  &lt;NA&gt;       white, blue red      </span></span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a><span class="co">#&gt; 3 R5-D4  &lt;NA&gt;       white, red  red      </span></span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a><span class="co">#&gt; 4 IG-88  none       metal       red      </span></span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a><span class="co">#&gt; 5 R4-P17 none       silver, red red, blue</span></span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a><span class="co">#&gt; 6 BB8    none       none        black</span></span>
<span id="cb2-34"><a href="#cb2-34" tabindex="-1"></a></span>
<span id="cb2-35"><a href="#cb2-35" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>()) <span class="co"># clearing everything</span></span></code></pre></div>
<p>The above code is run <em>without attaching</em> any of the packages
or its dependencies. So none of the problems with attaching a package is
present.</p>
<p>Despite the length of this article, which is mostly due to me being
overly detailed, the import system is made to be <strong>very simple for
the user</strong>.</p>
<p>What follows are descriptions of the main functions that together
form this new, infix-operator friendly <strong>&amp;</strong>
multi-package assignment friendly, import management system.</p>
<p> </p>
</div>
<div id="import_as" class="section level1">
<h1>import_as</h1>
<p>One can load a package without attaching it, and assign it to an
alias, in base R, using, for example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>alias <span class="ot">&lt;-</span> <span class="fu">loadNamespace</span>(<span class="st">&quot;packagename&quot;</span>, <span class="at">lib.loc =</span> lib.loc)</span></code></pre></div>
<p>Doing the above, instead of attaching a package using
<code>library()</code> or <code>require()</code>, can (often) be quite
beneficial (i.e. prevent overlapping namespaces, prevent overriding core
R functions, prevent polluting the namespace, clarify which function
came from which package, exposing functions from a package only in the
current environment e to be loaded locally , etc.)</p>
<p>Loading a package alias does have some drawbacks. One is that you
cannot easily import multiple related packages under the same alias.
While one probably wouldn’t want to import <strong>multiple</strong>
related packages under a <strong>single alias</strong> all the time,
there may be situations where importing multiple packages into a single
alias may actually be preferable:</p>
<ul>
<li>If multiple packages are meant to work together, constantly
switching between the different package name/alias prefixes may
eventually become annoying and even syntactically chaotic-looking.</li>
<li>A package may have one or several dependencies that are supposed to
be loaded together. For example: the <code>tidytable</code> package
essentially needs the <code>data.table</code> package to be loaded
also.</li>
<li>A package may have many extensions you may want to load together.
For example: <code>ggplot2</code> has many extensions (see <a href="https://exts.ggplot2.tidyverse.org/gallery/" class="uri">https://exts.ggplot2.tidyverse.org/gallery/</a>). If one
wishes to alias <code>ggplot2</code> including some of its many
extensions, it would be nice to load multiple R packages under the same
alias.</li>
<li>Suppose package <code>B</code> is supposed to overwrite a couple of
functions from package <code>A</code> (for example if package
<code>B</code> extends or improves the functionality from a function in
package <code>A</code>). In that case you may want to import package
<code>A</code>, and then overwrite it with package <code>B</code>.</li>
</ul>
<p>So there are several cases where it is perhaps desirable to load
multiple packages under the same alias.</p>
<p>And that is where <code>tinyoperations</code>’s
<code>import_as()</code> function comes in. It loads an R package + its
foreign exports under an alias, and also loads any specified
<strong>dependencies</strong>, <strong>enhances</strong> and/or
<strong>extensions</strong> of the package under the very same alias. It
also informs the user which objects from a package will overwrite which
objects from other packages, so you will never be surprised.</p>
<p><code>import_as(alias, ...)</code> is thus essentially the more
user-friendly and multi-package equivalent of
<code>alias &lt;- loadNamespace(...)</code>.</p>
<p>The main arguments of the <code>import_as()</code> function are:</p>
<ul>
<li><code>alias</code>: the name (unquoted) of the alias object under
which to load the package(s). To keep aliases easily distinguishable
from other objects that can also be subset with the <code>$</code>
operator, I recommend ending (not starting!) the names of all alias
names with a dot (.).</li>
<li><code>main_package</code>: the name (string) of the main package to
load.</li>
<li><code>foreign_exports</code>: Some R packages export functions that
are not defined in their own package, but in their direct dependencies -
“foreign exports”. If <code>TRUE</code> (default), the foreign exports
of the <code>main_package</code> are added to the alias, analogous to
the behaviour of base R’s <code>::</code> operator. If
<code>FALSE</code>, foreign exports are not added.</li>
<li><code>dependencies</code>: a character vector giving the
dependencies of the <code>main_package</code> to load under the alias
also.</li>
<li><code>enhances</code>: an optional character vector giving the
packages enhanced by the <code>main_package</code> to be loaded under
the alias also.</li>
<li><code>extensions</code>: an optional character vector giving the
extensions/reverse-dependencies of the <code>main_package</code> to load
under the same alias also.</li>
</ul>
<p>Here is one example. Lets load <a href="https://github.com/Rdatatable/data.table">data.table</a> and its
extensions <a href="https://github.com/markfairbanks/tidytable">tidytable</a>, under
the same alias, which I will call “tdt.” (for “tidy data.table”):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">import_as</span>(tdt., <span class="st">&quot;data.table&quot;</span>, <span class="at">extensions =</span> <span class="st">&quot;tidytable&quot;</span>) <span class="co"># this creates the tdt. object</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">#&gt; Importing packages...</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="co">#&gt; Done</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co">#&gt; You can now access the functions using `tdt.$`.</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">#&gt; (S3)methods will work like normally. </span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="co">#&gt; For conflicts report and package order, run `tdt.$.__attributes__.`.</span></span></code></pre></div>
<p>Now you can of course use those loaded packages as one would normally
do when using a package alias: <code>tdt.$some_function()</code>.</p>
<p>The created alias object has attributes showing which loaded package
overwrites which loaded functions, in what order the packages are loaded
and so on:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>tdt.<span class="sc">$</span>.__attributes__.<span class="sc">$</span>packages_order</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;data.table&quot; &quot;tidytable&quot;</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>tdt.<span class="sc">$</span>.__attributes__.<span class="sc">$</span>conflicts <span class="sc">|&gt;</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">package</th>
<th align="left">winning_conflicts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">data.table + foreign exports</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">tidytable</td>
<td align="left">first, last, between, fread</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>tdt.<span class="sc">$</span>.__attributes__.<span class="sc">$</span>args</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co">#&gt; $main_package</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co">#&gt; [1] &quot;data.table&quot;</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co">#&gt; $foreign_exports</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">#&gt; $dependencies</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co">#&gt; NULL</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="co">#&gt; $enhances</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="co">#&gt; NULL</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="co">#&gt; $extensions</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="co">#&gt; [1] &quot;tidytable&quot;</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="co">#&gt; $loadorder</span></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="co">#&gt; [1] &quot;dependencies&quot; &quot;main_package&quot; &quot;enhances&quot;     &quot;extensions&quot;</span></span></code></pre></div>
<p>See the help file for more details.</p>
<p> </p>
</div>
<div id="import_inops" class="section level1">
<h1>import_inops</h1>
<p>When aliasing an R package, infix operators are also loaded in the
alias. However, it may be cumbersome to use them from the alias. For
example this:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">import_as</span>(to., <span class="st">&quot;tinyoperations&quot;</span>)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>to.<span class="sc">$</span><span class="st">`</span><span class="at">%row~%</span><span class="st">`</span>(x, mat)</span></code></pre></div>
<p>or this:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>tinyoperations<span class="sc">::</span><span class="st">`</span><span class="at">%row~%</span><span class="st">`</span>(x, mat)</span></code></pre></div>
<p>is very cumbersome.</p>
<p>Therefore, <code>tinyoperations</code> also adds the
<code>import_inops(pkgs)</code> function, which exposes the infix
operators from the packages specified in character vector
<code>pkgs</code> to the current environment (like the global
environment, or the environment within a function), but does not attach
the functions to the namespace.</p>
<p>For example, the following code exposes the infix operators from the
<a href="https://github.com/Rdatatable/data.table">data.table</a> and <a href="https://github.com/markfairbanks/tidytable">tidytable</a> R
packages to the current environment, in this case the global
environment:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>pkgs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;data.table&quot;</span>, <span class="st">&quot;tidytable&quot;</span>)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">import_inops</span>(pkgs)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="co">#&gt; Getting infix operators from package: data.table...</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="co">#&gt; Getting infix operators from package: tidytable... no conflicts</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="co">#&gt; Checking for conflicting infix operators in the current environment...</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="co">#&gt; Placing infix operators in current environment...</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="co">#&gt; Done</span></span></code></pre></div>
<p>Just like in <code>import_as()</code>, the order of the packages
matters whenever there’s a conflict.</p>
<p>The <code>import_inops()</code> function has the <code>exclude</code>
and <code>include.only</code> arguments to specify exactly which infix
operators to expose to the current environment, as well as the
<code>overwrite</code> and <code>inherits</code> arguments to specify
what to do when the infix operators you are about to expose already
exist in the current environment (and loaded namespaces). This can be
handy to prevent overwriting any (user defined) infix operators already
present in the current environment or loaded namespaces.</p>
<p> </p>
<p>The user can set <code>action=&quot;remove&quot;</code>, which will delete the
infix operators from those packages exposed in the current environment
by <code>import_inops()</code>. Infix operators defined by the user will
not be touched. For example:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">import_inops</span>(pkgs, <span class="at">action =</span> <span class="st">&quot;remove&quot;</span>)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co">#&gt; checking for infix operators exposed to the current environment by `import_inops()` ...</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="co">#&gt; Removing the following infix operators:</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co">#&gt; %between%, %chin%, %flike%, %ilike%, %in%, %inrange%, %like%, %notin%, :=</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co">#&gt; Done</span></span></code></pre></div>
<p> </p>
<p>If the user would rather attach the infix operators to the (global)
namespace, <code>tinyoperations</code> provides the
<code>pk_lsf()</code> function, which returns a character vector listing
all functions or infix operators from a package. This vector can then be
used in the <code>include.only</code> argument of the
<code>library()</code> function. Like so:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">library</span>(magrittr, <span class="at">include.only =</span> <span class="fu">pkg_lsf</span>(<span class="st">&quot;magrittr&quot;</span>, <span class="at">type =</span> <span class="st">&quot;inops&quot;</span>))</span></code></pre></div>
<p> </p>
</div>
<div id="import_data" class="section level1">
<h1>import_data</h1>
<p>The <code>import_as()</code> and <code>import_inops()</code>
functions get all functions from the package namespace. But packages
often also have data sets, which are often not part of the
namespace.</p>
<p>The <code>data()</code> function in core R can already load data from
packages, but this function loads the data into the global environment,
instead of returning the data directly, making assigning the data to a
specific variable a bit annoying. Therefore, the
<code>tinyoperations</code> package introduces the
<code>import_data()</code> function, which directly returns a data set
from a package.</p>
<p>For example, to import the <code>chicago</code> data set from the <a href="https://github.com/cran/gamair">gamair</a> R package, and assign
it directly to a variable (without having to do re-assignment and so
on), one simply runs the following:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">import_data</span>(<span class="st">&quot;chicago&quot;</span>, <span class="st">&quot;gamair&quot;</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="co">#&gt;   death pm10median pm25median  o3median  so2median    time tmpd</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co">#&gt; 1   130 -7.4335443         NA -19.59234  1.9280426 -2556.5 31.5</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="co">#&gt; 2   150         NA         NA -19.03861 -0.9855631 -2555.5 33.0</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#&gt; 3   101 -0.8265306         NA -20.21734 -1.8914161 -2554.5 33.0</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="co">#&gt; 4   135  5.5664557         NA -19.67567  6.1393413 -2553.5 29.0</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co">#&gt; 5   126         NA         NA -19.21734  2.2784649 -2552.5 32.0</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="co">#&gt; 6   130  6.5664557         NA -17.63400  9.8585839 -2551.5 40.0</span></span></code></pre></div>
<p> </p>
</div>
<div id="miscellaneous-comments-on-package-imports" class="section level1">
<h1>Miscellaneous comments on package imports</h1>
<p>All “import_” functions in the <code>tinyoperations</code> package
have a <code>lib.loc</code> argument to explicitly specify from where to
get your packages (just like base R’s <code>loadNamespace()</code>,
<code>library()</code>, and <code>install.packages()</code>
functions).</p>
<p> </p>
<p>The <a href="https://github.com/tidyverse/magrittr">magrittr</a> and
<a href="https://github.com/r-lib/rlang">rlang</a> packages add
“pronouns” to R: <code>.</code>, <code>. data</code>, <code>.env</code>.
Fret not, for pronouns work regardless if you attached a package or not.
And you don’t need to use something like <code>rlang::.data</code> or
<code>rlang.$.data</code> for a pronoun to work. They just work.</p>
<p> </p>
<p>The <code>help.import()</code> function gets the help file for a
function <code>i</code> (or topic string <code>i</code>), even if the
function is inside an alias object, or if the function is an unattached
function (like exposed infix operators).</p>
<p>Example:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">import_as</span>(mr., <span class="st">&quot;magrittr&quot;</span>)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="fu">import_inops</span>(<span class="st">&quot;magrittr&quot;</span>)</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="fu">help.import</span>(<span class="at">i=</span>mr.<span class="sc">$</span>add)</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="fu">help.import</span>(<span class="at">i=</span><span class="st">`</span><span class="at">%&gt;%</span><span class="st">`</span>)</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="fu">help.import</span>(<span class="at">i=</span><span class="st">&quot;add&quot;</span>, <span class="at">alias=</span>mr.)</span></code></pre></div>
<p> </p>
<p>There are some additional miscellaneous functions related to the
package import system that should perhaps be mentioned also:</p>
<ul>
<li>the <code>pkg_get_deps()</code> function gets the dependencies (or
the enhances) of a package, regardless if the package is CRAN or
non-CRAN. See the help file for details.</li>
<li>the <code>pkgs %installed in% lib.loc</code> operator checks if the
packages specified in character vector <code>pkgs</code> are installed
in library paths <code>lib.loc</code>, and does this
<strong>without</strong> attaching or even loading the packages.</li>
</ul>
<p> </p>
</div>
<div id="an-example" class="section level1">
<h1>An example</h1>
<p>One R package that could benefit from the import system introduced by
<code>tinyoperations</code>, is the <a href="https://github.com/tidyverse/dplyr">dplyr</a> R package. The <a href="https://github.com/tidyverse/dplyr">dplyr</a> R package overwrites
<strong>core R</strong> functions (including base R) and it overwrites
functions from pre-installed recommended R packages (such as
<code>MASS</code>). I.e.:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>()) <span class="co"># clearing environment again</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="fu">library</span>(MASS)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># &lt;- notice dplyr overwrites base R and recommended R packages</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co">#&gt; Warning: package &#39;dplyr&#39; was built under R version 4.3.1</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co">#&gt; Attaching package: &#39;dplyr&#39;</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="co">#&gt; The following object is masked from &#39;package:MASS&#39;:</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="co">#&gt;     select</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from &#39;package:stats&#39;:</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="co">#&gt;     filter, lag</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="co">#&gt; The following objects are masked from &#39;package:base&#39;:</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a><span class="co"># detaching dplyr again:</span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a><span class="fu">detach</span>(<span class="st">&quot;package:dplyr&quot;</span>)</span></code></pre></div>
<p>Moreover, <a href="https://github.com/tidyverse/dplyr">dplyr</a>’s
function names are sometimes generic enough that there is no obvious way
to tell if a function came from <a href="https://github.com/tidyverse/dplyr">dplyr</a> or some other
package (for comparison: one can generally recognize
<code>stringi</code> functions as they all start with
<code>stri_</code>). If you look at the CRAN page for <a href="https://github.com/tidyverse/dplyr">dplyr</a>, you’ll notice it
has some interesting extensions you might want to use, such as <a href="https://github.com/moodymudskipper/powerjoin">powerjoin</a>. But
constantly switching between package prefixes or aliases is perhaps
undesirable.</p>
<p>So here <code>tinyoperations</code>’ <code>import_as()</code>
function might help. Below is an example where <a href="https://github.com/tidyverse/dplyr">dplyr</a> is loaded (including
its foreign exports), along with <a href="https://github.com/moodymudskipper/powerjoin">powerjoin</a> (which
is an extension), all under one alias which I’ll call
“<code>dr.</code>”. Moreover, the infix operators from
<code>magrittr</code> are exposed to the current environment.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">import_as</span>(</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  dr., <span class="st">&quot;dplyr&quot;</span>, <span class="at">extensions =</span> <span class="st">&quot;powerjoin&quot;</span>, <span class="at">lib.loc=</span><span class="fu">.libPaths</span>()</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>)</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="co">#&gt; Importing packages...</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="co">#&gt; Done</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="co">#&gt; You can now access the functions using `dr.$`.</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="co">#&gt; (S3)methods will work like normally. </span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="co">#&gt; For conflicts report and package order, run `dr.$.__attributes__.`.</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="fu">import_inops</span>(<span class="st">&quot;magrittr&quot;</span>) <span class="co"># getting the operators from `magrrittr`</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a><span class="co">#&gt; Getting infix operators from package: magrittr...</span></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a><span class="co">#&gt; Checking for conflicting infix operators in the current environment...</span></span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a><span class="co">#&gt; Placing infix operators in current environment...</span></span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a><span class="co">#&gt; Done</span></span></code></pre></div>
<p>The functions from <a href="https://github.com/tidyverse/dplyr">dplyr</a> can now be used with
the <code>dr.$</code> prefix. This way, base R functions are no longer
overwritten, and it will be clear for someone who reads your code
whether functions like the <code>filter()</code> function is the base R
filter function, or the <a href="https://github.com/tidyverse/dplyr">dplyr</a> filter function, as
the latter would be called as <code>dr.$filter()</code>.</p>
<p>Let’s first run a simple example code with the loaded functions:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">import_data</span>(<span class="st">&quot;starwars&quot;</span>, <span class="st">&quot;dplyr&quot;</span>)</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>d <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>  dr.<span class="sc">$</span><span class="fu">filter</span>(.data<span class="sc">$</span>species <span class="sc">==</span> <span class="st">&quot;Droid&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># notice the pronoun can be used without problems</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>  dr.<span class="sc">$</span><span class="fu">select</span>(name, dr.<span class="sc">$</span><span class="fu">ends_with</span>(<span class="st">&quot;color&quot;</span>))</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 4</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="co">#&gt;   name   hair_color skin_color  eye_color</span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;    </span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="co">#&gt; 1 C-3PO  &lt;NA&gt;       gold        yellow   </span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="co">#&gt; 2 R2-D2  &lt;NA&gt;       white, blue red      </span></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a><span class="co">#&gt; 3 R5-D4  &lt;NA&gt;       white, red  red      </span></span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a><span class="co">#&gt; 4 IG-88  none       metal       red      </span></span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a><span class="co">#&gt; 5 R4-P17 none       silver, red red, blue</span></span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a><span class="co">#&gt; 6 BB8    none       none        black</span></span></code></pre></div>
<p>Just add <code>dr.$</code> in front of the functions you’d normally
use, and everything works just as expected.</p>
<p>Now lets run an example from the <a href="https://github.com/moodymudskipper/powerjoin">powerjoin</a> GitHub
page (<a href="https://github.com/moodymudskipper/powerjoin" class="uri">https://github.com/moodymudskipper/powerjoin</a>), using the
above alias:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>male_penguins <span class="ot">&lt;-</span> dr.<span class="sc">$</span><span class="fu">tribble</span>(</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>     <span class="sc">~</span>name,    <span class="sc">~</span>species,     <span class="sc">~</span>island, <span class="sc">~</span>flipper_length_mm, <span class="sc">~</span>body_mass_g,</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a> <span class="st">&quot;Giordan&quot;</span>,    <span class="st">&quot;Gentoo&quot;</span>,    <span class="st">&quot;Biscoe&quot;</span>,               222L,        5250L,</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>  <span class="st">&quot;Lynden&quot;</span>,    <span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Torgersen&quot;</span>,               190L,        3900L,</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>  <span class="st">&quot;Reiner&quot;</span>,    <span class="st">&quot;Adelie&quot;</span>,     <span class="st">&quot;Dream&quot;</span>,               185L,        3650L</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>)</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>female_penguins <span class="ot">&lt;-</span> dr.<span class="sc">$</span><span class="fu">tribble</span>(</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>     <span class="sc">~</span>name,    <span class="sc">~</span>species,  <span class="sc">~</span>island, <span class="sc">~</span>flipper_length_mm, <span class="sc">~</span>body_mass_g,</span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>  <span class="st">&quot;Alonda&quot;</span>,    <span class="st">&quot;Gentoo&quot;</span>, <span class="st">&quot;Biscoe&quot;</span>,               <span class="dv">211</span>,        4500L,</span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a>     <span class="st">&quot;Ola&quot;</span>,    <span class="st">&quot;Adelie&quot;</span>,  <span class="st">&quot;Dream&quot;</span>,               <span class="dv">190</span>,        3600L,</span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a><span class="st">&quot;Mishayla&quot;</span>,    <span class="st">&quot;Gentoo&quot;</span>, <span class="st">&quot;Biscoe&quot;</span>,               <span class="dv">215</span>,        4750L,</span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a>)</span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a>dr.<span class="sc">$</span><span class="fu">check_specs</span>()</span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a><span class="co">#&gt; # powerjoin check specifications</span></span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a><span class="co">#&gt; ℹ implicit_keys</span></span>
<span id="cb17-17"><a href="#cb17-17" tabindex="-1"></a><span class="co">#&gt; → column_conflict</span></span>
<span id="cb17-18"><a href="#cb17-18" tabindex="-1"></a><span class="co">#&gt; → duplicate_keys_left</span></span>
<span id="cb17-19"><a href="#cb17-19" tabindex="-1"></a><span class="co">#&gt; → duplicate_keys_right</span></span>
<span id="cb17-20"><a href="#cb17-20" tabindex="-1"></a><span class="co">#&gt; → unmatched_keys_left</span></span>
<span id="cb17-21"><a href="#cb17-21" tabindex="-1"></a><span class="co">#&gt; → unmatched_keys_right</span></span>
<span id="cb17-22"><a href="#cb17-22" tabindex="-1"></a><span class="co">#&gt; → missing_key_combination_left</span></span>
<span id="cb17-23"><a href="#cb17-23" tabindex="-1"></a><span class="co">#&gt; → missing_key_combination_right</span></span>
<span id="cb17-24"><a href="#cb17-24" tabindex="-1"></a><span class="co">#&gt; → inconsistent_factor_levels</span></span>
<span id="cb17-25"><a href="#cb17-25" tabindex="-1"></a><span class="co">#&gt; → inconsistent_type</span></span>
<span id="cb17-26"><a href="#cb17-26" tabindex="-1"></a><span class="co">#&gt; → grouped_input</span></span>
<span id="cb17-27"><a href="#cb17-27" tabindex="-1"></a><span class="co">#&gt; → na_keys</span></span>
<span id="cb17-28"><a href="#cb17-28" tabindex="-1"></a></span>
<span id="cb17-29"><a href="#cb17-29" tabindex="-1"></a>dr.<span class="sc">$</span><span class="fu">power_inner_join</span>(</span>
<span id="cb17-30"><a href="#cb17-30" tabindex="-1"></a>  male_penguins[<span class="fu">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;island&quot;</span>)],</span>
<span id="cb17-31"><a href="#cb17-31" tabindex="-1"></a>  female_penguins[<span class="fu">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;island&quot;</span>)]</span>
<span id="cb17-32"><a href="#cb17-32" tabindex="-1"></a>)</span>
<span id="cb17-33"><a href="#cb17-33" tabindex="-1"></a><span class="co">#&gt; Joining, by = c(&quot;species&quot;, &quot;island&quot;)</span></span>
<span id="cb17-34"><a href="#cb17-34" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 2</span></span>
<span id="cb17-35"><a href="#cb17-35" tabindex="-1"></a><span class="co">#&gt;   species island</span></span>
<span id="cb17-36"><a href="#cb17-36" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt; </span></span>
<span id="cb17-37"><a href="#cb17-37" tabindex="-1"></a><span class="co">#&gt; 1 Gentoo  Biscoe</span></span>
<span id="cb17-38"><a href="#cb17-38" tabindex="-1"></a><span class="co">#&gt; 2 Gentoo  Biscoe</span></span>
<span id="cb17-39"><a href="#cb17-39" tabindex="-1"></a><span class="co">#&gt; 3 Adelie  Dream</span></span></code></pre></div>
<p>Notice that the only change made, is that all functions start with
<code>dr.$</code>, the rest is the same. No need for constantly
switching between <code>dplyr::...</code>, <code>powerjoin::...</code>
and so on - yet it is still clear from the code that the functions came
from the <a href="https://github.com/tidyverse/dplyr">dplyr</a> + <a href="https://github.com/moodymudskipper/powerjoin">powerjoin</a>
family, and there is no fear of overwriting functions from other R
packages - let alone core R functions.</p>
<p> </p>
<p>To show that <code>import_as()</code> actually does load all exported
functions, including foreign exports, consider the following proof:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">import_as</span>(dr., <span class="st">&quot;dplyr&quot;</span>, <span class="at">foreign_exports =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="co">#&gt; Importing packages...</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="co">#&gt; Done</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="co">#&gt; You can now access the functions using `dr.$`.</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="co">#&gt; (S3)methods will work like normally. </span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="co">#&gt; For conflicts report and package order, run `dr.$.__attributes__.`.</span></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>out <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">names</span>(dr.), <span class="st">&quot;.__attributes__.&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">sort</span>()</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>foo <span class="ot">&lt;-</span> <span class="fu">loadNamespace</span>(<span class="st">&quot;dplyr&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">getNamespaceExports</span>()</span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a>check <span class="ot">&lt;-</span> <span class="fu">all</span>(out <span class="sc">==</span> <span class="fu">sort</span>(foo))</span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="fu">print</span>(check) <span class="co"># must be TRUE</span></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">isTRUE</span>(check)) {</span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">&quot;Tony is really stupid&quot;</span>)</span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a>}</span></code></pre></div>
<p> </p>
<p> </p>
</div>
<div id="tinyverse-solutions-to-library-handling-without-external-r-packages" class="section level1">
<h1>Tinyverse solutions to library handling without external R
packages</h1>
<p>The <code>tinyverse</code> (<a href="https://cran.r-project.org/web/packages/pacs/vignettes/tinyverse.html" class="uri">https://cran.r-project.org/web/packages/pacs/vignettes/tinyverse.html</a>)
- not to be confused with the tidyverse - attempts to minimize
dependencies, and thus avoid using external R packages unless necessary.
“External R packages” here meaning not base/core R, not pre-installed
recommended R packages, and not <code>rstudioapi</code>.</p>
<p>There are some library handling issues that are traditionally solved
through external R packages - even though they can be solved quite well
without external R packages (especially since R version 4+). Since this
R package adheres to the <code>tinyverse</code> philosophy and focuses
on coding etiquette, some of these solutions will briefly be given
without the use of external R packages:</p>
<ul>
<li>Force an error when using a function that appears in multiple
attached packages: one can use the
<code>options(conflicts.policy = ...)</code> to specify when such an
error should be enforced.</li>
<li>Give warnings when partial argument matching occurs: one can use
<code>options( warnPartialMatchArgs = TRUE, warnPartialMatchAttr = TRUE, warnPartialMatchDollar = TRUE)</code>.</li>
<li>Get path of current script or project root folder: without R-Studio
one can use <code>commandArgs()</code> function; with R-Studio one can
use <code>rstudioapi::getSourceEditorContext()$path</code>. Using
<code>setwd(&quot;..&quot;)</code> will set the working directory one folder up -
which would often be your project root folder.</li>
<li>Project isolation: set your library to a folder specific to your
project (i.e. using <code>.libPaths()</code>).</li>
<li>Date-based version control: As MRAN is no longer available, one may
use the R-Studio package manager website as your repository (see <a href="https://packagemanager.posit.com/client/#/repos/2/overview" class="uri">https://packagemanager.posit.com/client/#/repos/2/overview</a>
or <a href="https://packagemanager.posit.co/client/#/repos/2/overview" class="uri">https://packagemanager.posit.co/client/#/repos/2/overview</a>).</li>
</ul>
<p> </p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
