---
title: "String related infix operators"
output:
  rmarkdown::html_vignette:
    toc: true
    number_sections: true
vignette: >
  %\VignetteIndexEntry{String related infix operators}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(tinyoperations)
```


&nbsp;


# sgrep

The `s %sgrep% p` operator checks if pattern `p` appears in character vector `s`.

&nbsp;

# String subsetting operators

The `x %sget% ss` operator returns a subset of each string in character vector `x`. Here `ss` is a vector of length 2, or a matrix with `nrow(ss)=length(x)` and 2 columns. The object `ss` should consist entirely of non-negative integers (thus 0, 1, 2, etc. are valid, but -1, -2, -3 etc are not valid). The first element/column of ss gives the number of characters counting from the left side to be extracted from x. The second element/column of ss gives the number of characters counting from the right side to be extracted from x.

Here are 2 examples:

```{r}
x <- c(paste0(letters[1:13], collapse=""), paste0(letters[14:26], collapse=""))
print(x)
ss <- c(2,3)
x %sget% ss

x <- c(paste0(letters[1:13], collapse=""), paste0(letters[14:26], collapse=""))
print(x)
ss <- c(1,0)
x %sget% ss
```

Thus `x %sget% ss` "gets" or extracts the given number of characters from the left and the right, and removes the rest.
There is also `x %strim% ss`, which is the opposite: it trims away the number of characters from the left and right as defined in the matrix `ss`, leaving you with whatever is left.

Here are again 2 examples:

```{r}
x <- c(paste0(letters[1:13], collapse=""), paste0(letters[14:26], collapse=""))
print(x)
ss <- c(2,3)
x %strim% ss

x <- c(paste0(letters[1:13], collapse=""), paste0(letters[14:26], collapse=""))
print(x)
ss <- c(1,0)
x %strim% ss
```


&nbsp; 


# String arithmetic

The `tinyoperations` package adds 4 string arithmetic operators:

 - `x %s+% y` concatenates `x` and `y`;
 - `x %s-% p` removes pattern `p` from each string in character vector `x`;
 - `x %s*% n` repeats each string in character vector `x` for `n` times;
 - `x %s/% p` counts how often pattern `p` occurs in string or vector `x`
 
I.e.:

```{r}
"Hello "%s+% " world"
c("Hello world", "Goodbye world") %s-% " world"
c("Ha", "Ho", "Hi", "Hu", "He", "Ha") %s*% 2:7
c("hello world & goodbye world", "world domination!") %s/% "world"
```

The right-side arguments `p`, `y`, and `n` can be a single value, or a vector of the same length as `x`.

&nbsp;

# Specifying Pattern search attributes in string infix operators

The `x %s-% p` and `x %s/% p` operators (and their in-place equivalents, given later), and the `%sgrep%` operator perform pattern matching for various purposes. By default the pattern matching is interpreted as case-sensitive `regex` patterns from `stringi`.

But, of course, sometimes one wants to change this. For example, one may want it to be case insensitive. Or perhaps one wants to use fixed expressions, or something else.

The `tinyoperations` package provides options for these cases. To use more refined pattern definition, simply replace the argument/right-hand-side expression `p` in the relevant operators with a call from the `s_pattern()` function.

The `s_pattern()` function uses the exact same argument convention as `stringi`. For example:

 - `s_pattern(regex=p, case_insensitive=FALSE, ...)`
 - `s_pattern(fixed=p, ...)`
 - `s_pattern(coll=p, ...)`
 - `s_pattern(charclass=p, ...)`

Note that the `s_pattern()` function only works for the infix operators (functions surrounded by `%` signs) related to strings in this R package.


Examples with Regular expressions:

```{r}
x <- c("Hello world", "Goodbye world")
p <- s_pattern(regex=" world")
x %s-% p

x <- c("Ha", "Ho", "Hi", "Hu", "He", "Ha") %s*% 10
p <- s_pattern(regex="Ha")
x %s/% p
```

Examples with Fixed expressions:

```{r}
x <- c("Hello world", "Goodbye world")
p <- s_pattern(fixed=" world")
x %s-% p

x <- c("Ha", "Ho", "Hi", "Hu", "He", "Ha") %s*% 10
p <- s_pattern(fixed="Ha")
x %s/% p
```

And so on. I'm sure you get the idea.


&nbsp;


# In-place modifying string arithmetic and sub-setting

With the exception of `%ss%` all infix operators for string arithmetic and string sub-setting have their in-place modifying equivalent:

 - `x %s+ =% y` is the same as `x <- x %s+% y`
 - `x %s- =% p` is the same as `x <- x %s-% p`
 - `x %s* =% n` is the same as `x <- x %s*% n`
 - `x %s/ =% p` is the same as `x <- x %s/% p`
 - `x %sget =% ss` is the same as `x <- x %sget% ss`
 - `x %strim =% ss` is the same as `x <- x %strim% ss`

 
Notice the extra space before the `=` sign. 

&nbsp;
